{"version":3,"sources":["assets\\scripts\\Juice.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const RandomInteger = function (e, t) {\n    return Math.floor(Math.random() * (t - e) + e)\n}\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Juice extends cc.Component {\n\n    @property(cc.SpriteFrame)\n    private particle = null;\n\n    @property(cc.SpriteFrame)\n    private circle = null;\n\n    @property(cc.SpriteFrame)\n    private slash = null;\n\n    init(data) {\n        this.particle = data.particle\n        this.circle = data.particle\n        this.slash = data.slash\n    }\n\n    // 合并时的动画效果\n    showJuice(pos, width) {\n        // 果粒\n        for (let i = 0; i < 10; ++i) {\n            const node = new cc.Node('Sprite');\n            const sp = node.addComponent(cc.Sprite);\n\n            sp.spriteFrame = this.particle;\n            node.parent = this.node;\n\n            const a = 359 * Math.random(),\n                i = 30 * Math.random() + width / 2,\n                l = cc.v2(Math.sin(a * Math.PI / 180) * i, Math.cos(a * Math.PI / 180) * i);\n            node.scale = .5 * Math.random() + width / 100;\n            const p = .5 * Math.random();\n\n            node.position = pos;\n            node.runAction(\n                cc.sequence(cc.spawn(cc.moveBy(p, l),\n                    cc.scaleTo(p + .5, .3),\n                    cc.rotateBy(p + .5, RandomInteger(-360, 360))),\n                    cc.fadeOut(.1),\n                    cc.callFunc(function () {\n                        node.active = false\n                    }, this))\n            )\n        }\n\n        // 水珠\n        for (let f = 0; f < 20; f++) {\n            const node = new cc.Node('Sprite');\n            const sp = node.addComponent(cc.Sprite);\n\n            sp.spriteFrame = this.circle;\n            node.parent = this.node;\n\n            let a = 359 * Math.random(), i = 30 * Math.random() + width / 2,\n                l = cc.v2(Math.sin(a * Math.PI / 180) * i, Math.cos(a * Math.PI / 180) * i);\n            node.scale = .5 * Math.random() + width / 100;\n            let p = .5 * Math.random();\n            node.position = pos\n            node.runAction(cc.sequence(cc.spawn(cc.moveBy(p, l), cc.scaleTo(p + .5, .3)), cc.fadeOut(.1), cc.callFunc(function () {\n                node.active = false\n            }, this)))\n        }\n\n        // 果汁\n        const node = new cc.Node('Sprite');\n        const sp = node.addComponent(cc.Sprite);\n\n        sp.spriteFrame = this.slash;\n        node.parent = this.node;\n\n        node.position = pos\n        node.scale = 0\n        node.angle = RandomInteger(0, 360)\n        node.runAction(cc.sequence(cc.spawn(cc.scaleTo(.2, width / 150), cc.fadeOut(1)), cc.callFunc(function () {\n            node.active = false\n        })))\n\n        setTimeout(() => {\n            this.node && this.node.destroy();\n        }, 3000);\n    }\n}\n\n"]}