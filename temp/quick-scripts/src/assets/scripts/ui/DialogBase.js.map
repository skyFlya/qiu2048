{"version":3,"sources":["assets\\scripts\\ui\\DialogBase.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { App } from \"../app/App\";\r\nimport UIBase from \"./UIBase\";\r\nimport { UIUtils } from \"./UIUtils\";\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nexport const enum DialogClickType  {\r\n    CLOSE = 0,\r\n    SURE,\r\n    CANCEL\r\n}\r\n\r\n@ccclass\r\nexport default class DialogBase extends UIBase {\r\n\r\n    @property(cc.RichText)\r\n    rtContent: cc.RichText = null;\r\n\r\n    @property(cc.Label)\r\n    lblTitle: cc.Label = null;\r\n\r\n    @property(cc.Sprite)\r\n    spTitle: cc.Sprite = null;\r\n\r\n    @property(cc.Button)\r\n    btnClose: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    btnSure: cc.Button = null;\r\n\r\n    @property(cc.Button)\r\n    btnCancel: cc.Button = null;\r\n\r\n    protected _dialogId: number = 0;\r\n    protected _callback: (code: DialogClickType) => void = null;\r\n    protected _atlas: cc.SpriteAtlas = null;\r\n\r\n    public set content(content: string) {\r\n        this.rtContent && (this.rtContent.string = content);\r\n    }\r\n\r\n    public set title(title: string) {\r\n        this.lblTitle && (this.lblTitle.string = title);\r\n        if (this.spTitle) {\r\n            if (!this._atlas) {\r\n                this._atlas = cc.loader.getRes('common/atlas/common', cc.SpriteAtlas);\r\n            }\r\n            if (this._atlas) {\r\n                let spriteFrame: cc.SpriteFrame = null;\r\n                switch (title) {\r\n                    case '提示':\r\n                        spriteFrame = this._atlas.getSpriteFrame('alert_title_tips');\r\n                        break;\r\n                    case '规则说明':\r\n                        spriteFrame = this._atlas.getSpriteFrame('alert_title_rule');\r\n                        break;\r\n                    default:\r\n                        spriteFrame = this._atlas.getSpriteFrame('alert_title_tips');\r\n                        break;\r\n                }\r\n                spriteFrame && (this.spTitle.spriteFrame = spriteFrame);\r\n            }\r\n          \r\n        }\r\n    }\r\n\r\n    public set dialogId(dialogId: number) {\r\n        this._dialogId = dialogId;\r\n    }\r\n\r\n    public get dialogId(): number {\r\n        return this._dialogId;\r\n    }\r\n\r\n    public set horizontalAlign(align: number) {\r\n        this.rtContent.horizontalAlign = align;\r\n    }\r\n\r\n    public setClickCallback(callback: (code: DialogClickType)=> void): void {\r\n        if (callback && typeof(callback) == 'function') {\r\n            this._callback = callback;\r\n        }\r\n    }\r\n\r\n    protected addUIEvent(): void {\r\n        this.btnClose && UIUtils.addClickEvent(this.btnClose.node, this.onCloseClick, this);\r\n        this.btnSure && UIUtils.addClickEvent(this.btnSure.node, this.onSureClick, this);\r\n        this.btnCancel && UIUtils.addClickEvent(this.btnCancel.node, this.onCancelClick, this);\r\n    }\r\n\r\n    protected onSureClick(): void {\r\n        this._callback && this._callback(DialogClickType.SURE);\r\n        App.dialogMgr.closeDialogById(this.dialogId);\r\n    }\r\n\r\n    protected onCancelClick(): void {\r\n        this._callback && this._callback(DialogClickType.CANCEL);\r\n        App.dialogMgr.closeDialogById(this.dialogId);\r\n    }\r\n\r\n    protected onCloseClick(): void {\r\n        this._callback && this._callback(DialogClickType.CLOSE);\r\n        App.dialogMgr.closeDialogById(this.dialogId);\r\n    }\r\n\r\n\r\n}"]}