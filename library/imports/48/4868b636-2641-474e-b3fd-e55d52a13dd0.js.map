{"version":3,"sources":["assets\\scripts\\utils\\object-utils.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { animateUtils } from \"./animate-utils\";\nimport { mathUtils } from \"./math-utils\";\nimport { random } from \"./random\";\n\n/**\n * 对象工具类\n */\nexport const objectUtils = {\n    /**\n     * 深拷贝\n     * @param Obj 对象\n     */\n    cloneObject(Obj) {\n        var buf;\n        if (Obj instanceof Array) {\n            buf = [];\n            for (let i = 0; i < Obj.length; i++) {\n                buf[i] = objectUtils.cloneObject(Obj[i]);\n            }\n\n            return buf;\n        } else if (Obj instanceof Object) {\n            buf = {};\n            for (let k = 0; k < Object.keys(Obj).length; k++) {\n                buf[Object.keys(Obj)[k]] = objectUtils.cloneObject(Obj[Object.keys(Obj)[k]]);\n            }\n            return buf;\n        } else {\n            return Obj;\n        }\n    },\n\n    loadRes(path: string, type: typeof cc.Asset,\n        options: {\n            onProgress?: (finish: number, total: number, item: cc.AssetManager.RequestItem) => void,\n            onComplete?: (error: Error, assets: cc.Asset | cc.Asset[]) => void,\n        } = {}): void {\n        let {\n            onComplete = null,\n            onProgress = null,\n        } = options;\n\n        // if (CC_DEBUG) {\n        //     cc.log(`${this.logTag} loadRes path : ${path}`)\n        // }\n        if (onProgress) {\n            cc.assetManager.resources.load(path, type, onProgress, onComplete)\n        } else {\n            cc.assetManager.resources.load(path, type, onComplete)\n        }\n    },\n\n    palyCoinJump(startNode: cc.Node, endNode: cc.Node, parent?: cc.Node) {\n        this.loadRes(`prefabs/coinAnimation`, cc.Prefab, {\n            onComplete: (error, assest: cc.Prefab) => {\n                let num = 5;\n                let finish = null;\n                let stepTime = 0.1;\n                let start = null;\n\n                if(!parent){\n                    parent = cc.Canvas.instance.node;\n                }\n\n                for (let index = 0; index < num; index++) {\n                    let redPack: cc.Node = cc.instantiate(assest);\n\n                    redPack.parent = parent;\n                    const startV2 = mathUtils.convertToParent(startNode, parent);\n                    const endV2 = mathUtils.convertToParent(endNode, parent);\n                    cc.tween(redPack)\n                        .set({ position: cc.v3(startV2.x + random.findRandomBase(-75, 75), startV2.y), scale: 1 })\n                        .delay(index * stepTime)\n                        .by(0.3, { position: cc.v3(0, 100) })\n                        .parallel(cc.tween(redPack).then(animateUtils.getBezier(0.5, startV2, endV2, 100, 60)), cc.tween(redPack).to(0.8, { scale: 0.5 }))\n                        .delay(0.1)\n                        .call(() => {\n                            redPack.destroy();\n                            if (index == num - 1) {\n                                finish && finish();\n                            }\n                            if (index == 0) {\n                                start && start();\n                            }\n                        })\n                        .start()\n                }\n            }\n        })\n    }\n\n}"]}